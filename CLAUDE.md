# 開発標準ルール

## 概要
本ドキュメントは、開発を進める際に必ず参照し、遵守すべき標準ルールを定義します。

## ドキュメント管理

### 永続的ドキュメント

プロジェクト全体を通して管理・更新される基本ドキュメント：

#### 1. プロダクト企画書 (`product.md`)
- プロダクトビジョンや目的
- ターゲットユーザーと課題・ニーズ
- 主要な機能や目標
- 成功の定義

#### 2. 要求仕様書 (`requirements.md`)
- ユーザーストーリー
- 受け入れ条件

#### 3. 機能設計書 (`design.md`)
- 機能ごとのアーキテクチャ
- 構成図

#### 4. 技術仕様書 (`tech.md`)
- テクノロジースタックやフレームワーク
- 開発ツールや手法
- 技術的な制約事項や要求事項
- 利用するサードパーティ製品

#### 5. アプリ構造定義書 (`structure.md`)
- フォルダやファイルの構成
- 命名規則
- コーディング規約

### ステアリングファイル

追加開発・修正開発時に作成する作業用ドキュメント：

#### 作成ルール
- **格納場所**: `.steering/[日付YYYYMMDD]-[開発タイトル]/` ディレクトリ
- **必須ファイル**:
  1. **要求仕様書** (`requirements.md`) - 今回の作業で要求されている仕様、作業依頼内容
  2. **機能設計書** (`design.md`) - 実装方針、設計詳細
  3. **タスクリスト** (`tasklist.md`) - 実装タスクの一覧と進捗管理

## 開発プロセス

### 初回開発時の手順

1. **日付の確認**
   - **重要**: 必ず `date +"%Y%m%d"` コマンドで今日の日付を確認する
   - ディレクトリ名やファイル名に使用する日付は必ず実行時の日付を使用

2. **永続的ドキュメントの作成**
   - 上記の永続的ドキュメント（1〜5）を作成
   - 各ドキュメントの内容を定義

3. **ステアリングディレクトリの作成**
   - `.steering/[日付YYYYMMDD]-initial-setup/` ディレクトリを作成

4. **ステアリングファイルの作成**
   - 要求仕様書 (`requirements.md`): 初回開発の要求事項を記載
   - 機能設計書 (`design.md`): システム全体の設計を記載
   - タスクリスト (`tasklist.md`): 実装タスクを洗い出して記載

5. **タスク実行**
   - ステアリングファイルのタスクリストに基づいて実装を進める
   - **必須**: 実装したコードに対して開発者テストを作成

6. **テスト実行と品質確認**
   - 作成したテストをすべて実行し、パスすることを確認
   - リント・型チェックを実行

### 追加開発・修正開発時の手順

1. **日付の確認**
   - **重要**: 必ず `date +"%Y%m%d"` コマンドで今日の日付を確認する
   - ディレクトリ名やファイル名に使用する日付は必ず実行時の日付を使用

2. **ステアリングディレクトリの作成**
   - `.steering/[日付YYYYMMDD]-[開発タイトル]/` ディレクトリを作成
   - 例: `.steering/20250918-user-authentication/`

3. **ステアリングファイルの作成**
   - 要求仕様書 (`requirements.md`): 今回の作業内容と要求事項を記載
   - 機能設計書 (`design.md`): 実装方針と設計詳細を記載
   - タスクリスト (`tasklist.md`): 実装タスクを洗い出して記載

4. **タスク実行**
   - ステアリングファイルのタスクリストに基づいて実装
   - **必須**: 実装したコードに対して開発者テストを作成

5. **テスト実行と品質確認**
   - 作成したテストをすべて実行し、パスすることを確認
   - リント・型チェックを実行

6. **永続的ドキュメントへの反映**
   - 開発完了後、変更内容を永続的ドキュメントに反映
   - **重要**: 1ファイルごとに編集後、必ず確認・承認を得てから次のファイル編集を行う

## テスト標準

### 開発者テストの実施

#### テスト作成の原則
- **必須**: すべての新規作成・修正コードに対してテストを作成
- **カバレッジ**: 作成・修正した機能の主要なパスとエッジケースをカバー
- **命名規則**: テストファイルは `[対象ファイル名].test.[拡張子]` または `[対象ファイル名].spec.[拡張子]`

#### テストの種類
1. **単体テスト**: 個々の関数・メソッドの動作確認
2. **統合テスト**: 複数のコンポーネント間の連携確認
3. **E2Eテスト**: ユーザー視点でのシナリオテスト（必要に応じて）

#### テスト実施タイミング
1. **コード実装後**: 即座にテストを作成・実行
2. **コミット前**: すべてのテストがパスすることを確認
3. **プルリクエスト前**: テストカバレッジを確認

## コマンド

### リント・型チェック・テスト
開発完了時は以下のコマンドを実行してコードの品質を確認すること：
- `npm run lint` - コードスタイルのチェック
- `npm run typecheck` - TypeScriptの型チェック
- `npm test` - テストの実行（プロジェクトに設定されている場合）

## 注意事項
- ドキュメントの更新は段階的に行い、各段階で承認を得る
- タスクリストは実施内容と日時が明確にわかる命名とする
- コード変更後は必ずリント・型チェックを実施する